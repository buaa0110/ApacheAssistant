{% extends 'base.html' %}
{% block title %}
性能监控
{% endblock %}
{% block head %}
{% endblock %}
{% block MainContainer %}
<!-- Start Content -->
	<div class="content cf">
    <div class="grid-1 cf">
			<h1>性能监控</h1>
			<p><strong>您可以在此查看Apache服务器的相关性能参数，以便于您更好地掌握本地服务器状态</strong></p>
		</div>
		<div class="gallery">
			<ul id="portfolio-one">
				<li class="development design">
				<h2>查看Apache状态</h2>
				<div class="ui segment">
					<a class="ui basic right label">当前Apache服务器的状态为：</a>
					<button class="positive ui button" id="stateButton">Running</button>
				</div>
				</li>

				<li class="development photography">
				<h2>改变Apache状态</h2>
				<div class="ui segment">
					<button class="positive ui button" id="changeButton">运行/停止</button>
					<button class="positive ui button" id="restartButton">重启</button>
				</div>
				</li>

				<li class="photography design">
				<h2>查看性能参数</h2>

				<div class="ui segment">
					<a class="ui basic right button" id="netSpeed">网络速度监控</a>
					<canvas id="netSpeedChart"></canvas>
				</div>
				<div class="ui divider"></div>
				<div class="ui segment">
					<a class="ui basic right button" id="cpuOcc">CPU占用率监控</a>
					<canvas id="CPUOccupied"></canvas>
				</div>
				<div class="ui divider"></div>
				<div class="ui segment">
					<a class="ui basic right button" id="ramOcc">内存占用率监控</a>
					<canvas id="RAMOccupied"></canvas>
				</div>
				</li>
			</ul>
		</div>

		<script type="text/javascript">
			$.ajax({
            url: '/api/save_config_path/',
            data: JSON.stringify({ 'path': "wjknb" }),
            type: 'POST',
            contentType: 'application/json;charset=utf-8',
            success: function (data) {
                //显示结果
                console.log(data);
								var speed = document.getElementById('netSpeedChart').getContext('2d');
								var chart = new Chart(speed, {
								    // The type of chart we want to create
								    type: 'line',

								    // The data for our dataset
								    data: {
								        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
								        datasets: [{
								            label: 'Speed',
								            backgroundColor: 'rgb(255, 99, 132)',
								            borderColor: 'rgb(255, 99, 132)',
								            data: [0, 10, 5, 2, 20, 30, 45]
								        }]
								    },

								    // Configuration options go here
								    options: {}
								});

								var cpu = document.getElementById('CPUOccupied').getContext('2d');
								dataCpu = {
								    datasets: [{
								        data: [10, 20],
												backgroundColor:['#ff6384','#36a2eb']
								    }],

								    // These labels appear in the legend and in the tooltips when hovering different arcs
								    labels: [
								        '已用',
								        '可用'
								    ]
								};
								var cpuChart = new Chart(cpu, {
								    type: 'pie',
								    data: dataCpu,
								    options: {}
								});

								var ram = document.getElementById('RAMOccupied').getContext('2d');
								dataRam = {
								    datasets: [{
								        data: [10, 20],
												backgroundColor:['#ff6384','#36a2eb']
								    }],

								    // These labels appear in the legend and in the tooltips when hovering different arcs
								    labels: [
								        '已用',
								        '可用'
								    ]
								};
								var ramChart = new Chart(ram, {
								    type: 'pie',
								    data: dataRam,
								    options: {}
								});
            },
						error:function(data){
							alert(data["error"]);
						}

        })

		</script>
	</div>
{% endblock %}
